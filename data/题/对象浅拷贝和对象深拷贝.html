<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>对象深拷贝和浅拷贝</title>

</head>
<body>

</body>
<script>
    /*~function () {
        // ->这就是浅拷贝
        var obj = {"name": "hwb", "age": 26, bir: ['sx', 'yc', 'js']}
        var newObj = {};
        for (var key in obj) {
            newObj[key] = obj[key];
            // console.log(key,obj[key])
        }
        //    console.log(obj)
        //    console.log(newObj)
        obj.bir.push('zd');
        // console.log(obj.bir);
        // console.log(newObj.bir);
    }()*/

</script>
<script>
   /* ~function () {
        //->这就是深拷贝(就像剥洋葱一样)
        var obj = {"name": "hwb", "age": 26, bir: {m: 'wo', n: 'ai'}}

        function deepCopy(oldObj) {
            var newObj = {};
            for (var key in oldObj) {
                if (typeof oldObj[key] == 'object') { // 对value进行二次遍历
                    newObj[key] = deepCopy(oldObj[key]);
                } else { // 直接把value赋值给key
                    newObj[key] = oldObj[key];
                }
            }
            return newObj;
        }

        // console.log(deepCopy(obj))
        var result = deepCopy(obj);
        result.bir.m = "dfdsf";
        console.log(obj.bir.m)
    }()*/
    /*
    // 数组也可以用for in 循环
    var arr = [1,2,3,4]
    for(var key in arr){
        console.log(key,arr[key])
    }*/
</script>
<script>
    let obj = {
        name: 'lk',
        age: 18
    }
    function copyDeep(obj) {
        // console.log(obj);
        let temp = {}
        if (typeof obj === 'object') {
            if (Object.prototype.toString.call(obj) === "[object Object]") {
                console.log(obj);
                for (let key in obj) {
                    if (obj[key] === obj) {
                        temp[key] = temp;
                    } else {
                        temp[key] = copyDeep(obj[key])
                    }
                }
            } else if (Object.prototype.toString.call(obj) === "[object Function]") {
                return new Function(obj)
            } else if (Object.prototype.toString.call(obj) === "[object Reg]") {
                return new Reg(obj)
            } else if (Object.prototype.toString.call(obj) === "[object Date]") {
                return new Date(obj)
            } else if (Object.prototype.toString.call(obj) === "[object Array]") {
                return new Array(obj)
            }
        } else {
            console.log(obj);
            return obj
        }
        return temp
    }
    let newObj = copyDeep(obj);
</script>

</html>
